<meta content="width=device-width, initial-scale=1.0, user-scalable=1.0, minimum-scale=1.0, maximum-scale=5.0" name="viewport"/>
<style>
  body {
    margin:0; padding:0;
    background:#000; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≥ */
    font-family: 'Inter', Arial, sans-serif;
    color:#fff;
    height:100vh; 
    overflow:hidden;
  }
  body.locked { overflow:hidden; }

  #screen-lock {
    position:fixed; inset:0;
    display:flex; 
    align-items:center; /* ‡∏à‡∏±‡∏î‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
    justify-content:center; /* ‡∏à‡∏±‡∏î‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
    min-height:100vh; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    background:#000; 
    z-index:9999;
  }

  #lock-box {
    width:90%; 
    max-width:420px;  /* ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
    padding:28px 24px;
    border-radius:20px;

    /* glass ‡∏Ç‡∏≤‡∏ß‡πÇ‡∏õ‡∏£‡πà‡∏á */
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);

    border: 1px solid rgba(255,255,255,0.25);
    box-shadow: 0 12px 32px rgba(0,0,0,0.6);

    color:#fff;
    text-align:center;
  }

  #lock-box h2 {
    margin:0 0 18px;
    font-size:22px;
    font-weight:700;
  }

  .field {
    display:flex;
    align-items:center;
    margin-bottom:14px;
    border-radius:999px;
    padding:10px 14px;
    background:rgba(255,255,255,0.2);
    border:1px solid rgba(255,255,255,0.3);
  }

  .field input, .field select {
    flex:1;
    background:transparent;
    border:0;
    outline:0;
    color:#fff;
    font-size:15px;
  }

  #unlock-btn {
    width:100%;
    margin-top:12px;
    padding:12px 18px;
    border-radius:999px;
    border:0;
    font-size:16px;
    font-weight:600;
    background:linear-gradient(90deg,#8e2de2,#4a00e0);
    color:#fff;
    cursor:pointer;
    transition:.2s;
  }
  #unlock-btn:hover {
    opacity:.9;
  }
</style>

<div id="screen-lock">
  <!-- ‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á -->
  <div class="scene"></div>
  <div class="scene-mask"></div>
  <!-- SVG ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤ -->
  <svg viewBox="0 0 1440 900" preserveAspectRatio="none">
    <defs>
      <linearGradient id="fog" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="rgba(255,255,255,0.6)"/>
        <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
      </linearGradient>
    </defs>
    <!-- ‡∏ä‡∏±‡πâ‡∏ô‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏Å‡∏• -->
    <path d="M0,520 L200,420 L380,470 L520,400 L740,500 L980,380 L1200,460 L1440,390 L1440,900 L0,900 Z"
          fill="#6b63d9" opacity="0.45"></path>
    <!-- ‡∏ä‡∏±‡πâ‡∏ô‡∏Å‡∏•‡∏≤‡∏á -->
    <path d="M0,600 L180,520 L360,560 L520,520 L660,600 L880,520 L1100,600 L1300,560 L1440,600 L1440,900 L0,900 Z"
          fill="#4f46c8" opacity="0.65"></path>
    <!-- ‡∏ä‡∏±‡πâ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ -->
    <path d="M0,700 L160,660 L340,690 L520,650 L700,710 L880,660 L1060,720 L1240,680 L1440,720 L1440,900 L0,900 Z"
          fill="#221a56" opacity="0.9"></path>
    <!-- ‡πÅ‡∏ô‡∏ß‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ -->
    <path d="M0,760 C200,740 300,800 480,780 C700,760 860,820 1100,790 C1240,770 1340,800 1440,800 L1440,900 L0,900 Z"
          fill="#0e0a2a"></path>
  </svg>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å -->
  <div id="lock-box" role="dialog" aria-modal="true" aria-labelledby="title">
    <div class="logo-wrap">
      <a href="https://www.tiktok.com/@bulkget?_t=ZS-8ylDYiavxkD&_r=1" target="_blank" rel="noopener">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjSdH_YVzywJuFBmnLIbnHMtE2TX1A1jXiVEgcFqKQfRCSCqo8d3OXSKRFAiQPovYVRr2WS9wtuyDcqmlQ3qrduWCNU6zmfdA4Qp0HtGq-cTN9VA59U-SDNWVCkkRQdRYyqqIfUkrTmhS5G_yJx8R57uXD_A1AHWQ0w3Gk-0Qi3zhRiRuAT61Z7UoY0eQ/s320/20241010_225330.png" alt="App Logo"/>
      </a>
      <div class="app-name">BulkGet App</div>
    </div>

    <div id="msg"></div>
    <div class="title" id="title">Login</div>
    <div class="sub">Enter your access code to continue</div>

    <div class="field">
      <div class="icon">‚è±Ô∏è</div>
      <select id="duration-select" aria-label="Access duration">
        <option value="minute">1 minute</option>
        <option value="day">1 day (Free code : )</option>
        <option value="7days">7 days</option>
        <option value="30days">30 days</option>
      </select>
    </div>
    <div class="hint">Choose your access duration</div>

    <div class="field">
      <div class="icon">üîí</div>
      <input id="access-input" type="text" placeholder="Access code" autocomplete="one-time-code" inputmode="text"/>
    </div>

    <button id="unlock-btn">Login</button>
    <div id="countdown-timer"></div>
  </div>
</div>

<script>
  function lockScreen(){
    document.body.classList.add('locked');
    document.getElementById('screen-lock').style.display='flex';
  }
  function unlockScreen(){
    document.body.classList.remove('locked');
    document.getElementById('screen-lock').style.display='none';
    document.body.style.backgroundColor = "#000"; /* ‡∏Ñ‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏°‡∏∑‡∏î */
  }
  lockScreen();

  function getExpirationTime(type, value){
    const now = new Date();
    if(type==="minute") now.setMinutes(now.getMinutes()+value);
    else if(type==="day") now.setDate(now.getDate()+value);
    return now.getTime();
  }
  const durationMap = {
    minute:{type:"minute", value:1},
    day:{type:"day", value:1},
    "7days":{type:"day", value:7},
    "30days":{type:"day", value:30}
  };

  let countdownInterval;
  function startCountdown(expire){
    clearInterval(countdownInterval);
    const el = document.getElementById("countdown-timer");
    countdownInterval = setInterval(()=>{
      const now = Date.now(), d = expire - now;
      const days = Math.floor(d/(1000*60*60*24));
      const h = Math.floor((d%(1000*60*60*24))/(1000*60*60));
      const m = Math.floor((d%(1000*60*60))/(1000*60));
      const s = Math.floor((d%(1000*60))/1000);
      el.textContent = d>0 ? `Time remaining: ${days?days+"d ":""}${h}h ${m}m ${s}s` : "Expired! Please re-enter the code.";
      if(d<0){
        clearInterval(countdownInterval);
        lockScreen();
        localStorage.removeItem("access_granted");
        localStorage.removeItem("expiration_time");
      }
    },1000);
  }

  // restore
  (function(){
    const ok = localStorage.getItem("access_granted");
    const exp = localStorage.getItem("expiration_time");
    if(ok && exp){
      const t = parseInt(exp,10);
      if(Date.now() < t){
        unlockScreen();
        window.scrollTo(0,0);
        startCountdown(t);
        window.AppInventor?.setWebViewString("unlocked");
      }else{
        localStorage.removeItem("access_granted");
        localStorage.removeItem("expiration_time");
      }
    }
  })();

  function showMsg(type, text){
    const el = document.getElementById('msg');
    el.className=''; el.textContent=text||'';
    if(!text){ el.style.display='none'; return; }
    el.style.display='block';
    el.classList.add(type==='success'?'success':'error');
    const box = document.getElementById('lock-box');
    box.classList.remove('shake'); void box.offsetWidth; box.classList.add('shake');
  }

  function setLoading(state){
    const btn = document.getElementById("unlock-btn");
    btn.disabled = state;
    btn.classList.toggle('btn-loading', state);
  }

  async function doUnlock(){
    const input = document.getElementById("access-input");
    const code = input.value.trim();
    const selected = document.getElementById("duration-select").value;
    if(!code){ showMsg('error','Please enter your access code.'); input.focus(); return; }

    const url = "https://script.google.com/macros/s/AKfycbxpgnHFx25XGdA-8yfP_17e_GqcremB5qqBlWaJ0yIUxQb4mc6o01TYPFS8TKt8nWQ/exec?code="
      + encodeURIComponent(code) + "&type=" + encodeURIComponent(selected);

    showMsg('',''); setLoading(true);
    try{
      const r = await fetch(url);
      const result = await r.text();
      if(result === "valid"){
        const expire = getExpirationTime(durationMap[selected].type, durationMap[selected].value);
        localStorage.setItem("access_granted","true");
        localStorage.setItem("expiration_time", String(expire));
        unlockScreen();
        window.scrollTo(0,0);
        startCountdown(expire);
        window.AppInventor?.setWebViewString("unlocked");
        showMsg('success','Unlocked successfully.');
      }else{
        showMsg('error','Invalid access code.');
        input.focus();
      }
    }catch(e){
      console.error(e);
      showMsg('error','Error connecting to server. Please try again.');
    }finally{
      setLoading(false);
    }
  }

  document.getElementById("unlock-btn").addEventListener("click", doUnlock);
  document.getElementById("access-input").addEventListener("keydown", e=>{
    if(e.key==="Enter"){ e.preventDefault(); doUnlock(); }
  });
</script>
